"bundle";!function(){var a=System.amdDefine;a("components/details.html!github:systemjs/plugin-text@0.0.4.js",[],function(){return'<template> <require from="../elements/closeInfo"></require> <div class="page-content"> <div class="col-md-3"> <h5 t="details.closeToThisPlace"></h5> <close-info repeat.for="i of closeInfos"></close-info> </div> <div class="col-md-5 data" id="data" innerHTML.bind="data"></div> <div class="col-md-4"> <h5 t="details.alsoInteresting"></h5> </div> </div>  </template>'})}(),System.register("components/details.js",["fetch","aurelia-fetch-client","aurelia-framework","markdown","aurelia-i18n"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){},function(a){b=a.HttpClient},function(a){c=a.inject},function(a){d=a["default"]},function(a){e=a.I18N}],execute:function(){f=function(){function a(a,b,c){babelHelpers.classCallCheck(this,f),this.http=b,this.i18n=a,this.element=c,this.data="",this.closeInfos=[{data:"theatre",pos:[65,54]}]}babelHelpers.createClass(a,[{key:"activate",value:function(a){return this.link=a.data,this.fetchData(this.link)}},{key:"fetchData",value:function(a){var b=this;return this.http.fetch("data/full/"+a+".md").then(function(a){return a.text()}).then(function(a){var c=d.markdown.toHTML(a);b.data=c})}},{key:"attached",value:function(){$(this.element).find("#data").find("img").addClass("img-responsive img-thumbnail")}}]);var f=a;return a=c(e,b,Element)(a)||a}(),a("Details",f)}}}),function(){var a=System.amdDefine;a("components/map.html!github:systemjs/plugin-text@0.0.4.js",[],function(){return'<template> <div id="map"></div> </template>'})}(),System.register("components/map.js",["lodash","fetch","aurelia-fetch-client","aurelia-framework","markdown","aurelia-i18n"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a["default"]},function(a){},function(a){c=a.HttpClient},function(a){d=a.inject},function(a){e=a["default"]},function(a){f=a.I18N}],execute:function(){g=function(){function a(a,b){babelHelpers.classCallCheck(this,g),this.self=this,self.http=b,self.i18bn=a}babelHelpers.createClass(a,[{key:"fetchMarkers",value:function(a,c){var d=new L.MarkerClusterGroup;b.forEach(a,function(a){var b=L.marker(new L.LatLng(a.pos[0],a.pos[1]),{icon:L.mapbox.marker.icon({"marker-symbol":a.marker,"marker-color":a.color,"marker-size":"large"}),title:"index"});self.http.fetch("data/thumbs/"+a.data+".md").then(function(a){return a.text()}).then(function(c){var f=e.markdown.toHTML(c);b.bindPopup('<div class="marker-thumb">'+f+'</div><div class="text-right"><a href="/#/'+a.data+'" class="btn btn-default">'+self.i18bn.i18next.t("map.marker.readMore")+"</a></div>"),d.addLayer(b)})}),c.addLayer(d)}},{key:"fetchIndex",value:function(a){var b=this;self.http.fetch("data/index.json").then(function(a){return a.json()}).then(function(c){b.fetchMarkers(c,a)})}},{key:"attached",value:function(){L.mapbox.accessToken="pk.eyJ1Ijoic2VyZ2V5c2VkZWxuaWtvdiIsImEiOiJjaW05NzZucDEwMDBnd2RtOGo0N3U4YTJ4In0.BnhUwye9rhjh9z2124wkQA",self.map=L.mapbox.map("map","mapbox.streets").setView([57.15,65.53333],12),this.fetchIndex(self.map)}}]);var g=a;return a=d(f,c)(a)||a}(),a("Map",g)}}});