"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.4.js",[],function(){return'<template> <require from="elements/navBar"></require> <require from="elements/footer"></require> <nav-bar router.bind="router"></nav-bar> <router-view></router-view> <footer></footer> </template>'})}(),System.register("app.js",["bootstrap","aurelia-i18n","aurelia-event-aggregator","aurelia-framework","aurelia-router","elements/userInfo"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a["default"]},function(a){c=a.I18N,d=a.BaseI18N},function(a){e=a.EventAggregator},function(a){f=a.inject},function(a){g=a.Redirect},function(a){h=a.UserInfo}],execute:function(){i=function(){function a(a,c,d){babelHelpers.classCallCheck(this,b),this.i18n=a,this.i18n.setLocale("ru"),L.mapbox.accessToken="pk.eyJ1Ijoic2VyZ2V5c2VkZWxuaWtvdiIsImEiOiJjaW05NzZucDEwMDBnd2RtOGo0N3U4YTJ4In0.BnhUwye9rhjh9z2124wkQA",VK.init({apiId:5483036})}babelHelpers.createClass(a,[{key:"configureRouter",value:function(a,b){var c=[{route:["","home"],name:"home",moduleId:"./components/home",nav:!0,title:"Главное",settings:{roles:[]}},{route:["map"],name:"map",moduleId:"./components/map",nav:!0,title:"Карта",settings:{roles:[]}},{route:[":data"],name:"details",moduleId:"./components/details",nav:!1,title:"Детали",settings:{roles:[]}},{route:["feedback"],name:"feedback",moduleId:"./components/feedback",nav:!0,title:"Обсудить",settings:{roles:[]}},{route:["http://xn--l1adgmc.xn----itbklch6ag0gq.xn--p1ai/"],name:"forum",moduleId:"http://xn--l1adgmc.xn----itbklch6ag0gq.xn--p1ai/",nav:!0,title:"Форум",settings:{roles:[],target:"blank"}},{route:["adm"],name:"admin",moduleId:"./components/admin",nav:!1,title:"Админ",settings:{roles:["admin"]}}];a.title="Литературная карта Тюмени",a.addPipelineStep("authorize",j),a.map(c),this.router=b}}]);var b=a;return a=f(c,Element,e)(a)||a}(),a("App",i),j=function(){function a(a){babelHelpers.classCallCheck(this,b),this.userInfo=a}babelHelpers.createClass(a,[{key:"run",value:function(a,b){return a.getAllInstructions().some(function(a){return-1!==a.config.settings.roles.indexOf("admin")})&&!this.userInfo.isLoggedIn?b.cancel(new g("")):b()}}]);var b=a;return a=f(h)(a)||a}()}}}),System.register("main.js",["aurelia-i18n","i18next-xhr-backend"],function(a){"use strict";function b(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-i18n",function(a){a.i18next.use(d).init({backend:{loadPath:"locales/{{lng}}.json?t="+(new Date).getTime()},lng:"ru",attributes:["t","i18n"],fallbackLng:"ru",debug:!0,ns:["translation"],defaultNS:"translation",fallbackNS:"translation"}),console.log("init od XHR done")}),a.start().then(function(a){return a.setRoot()})}var c,d;return a("configure",b),{setters:[function(a){c=a.I18N},function(a){d=a["default"]}],execute:function(){}}});